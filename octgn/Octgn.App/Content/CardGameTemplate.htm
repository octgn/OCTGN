<div id="script">
    <script language="javascript">
        function GetList(dir)
        {
            $.get("/api/ResourceList/Get", { resourcePath: dir }, function (data) {
                var dirs = [];
                var files = [];

                $.each(data.directories, function (key, val) {
                    dirs.push('<li id="' + key + '"><a href="#" onclick="GetList(\'' + val + '\')">' + val + '</a></li>');
                });
                $.each(data.files, function (key, val) {
                    files.push('<li id="' + key + '">' + val + '</li>');
                });
                $('#dirdiv').empty();
                $('<ul/>', {
                    'class': 'my-new-list',
                    html: dirs.join('')
                }).appendTo('#dirdiv');
                $('#filediv').empty();
                $('<ul/>', {
                    'class': 'my-new-list',
                    html: files.join('')
                }).appendTo('#filediv');
            });
        }
        var first = false;
        if(first)
        {
            GetList("");
            first = false;
        }
        var cards = [];
        $.get("/api/ResourceList/Get", { resourcePath: "a6c8d2e8-7cd8-11dd-8f94-e62b56d89593/Sets/cards" }, function (data) {
            $.each(data.files, function (key, val) {
                var insert = val.replace(/\//g, "--");
                cards.push(insert);
            });
        });
        var count = 0;
        function GetNext()
        {
            if(count > cards.length)
            {
                count = 0;
            }
            $('#testimg').attr('src', "/Resource/" + cards[count]);
            count = count + 1;
        }
    </script>
</div>
<div id="gameboard">
 <a href ="#" onclick="GetNext()"><img src="/Resource/cards--back.jpg/a6c8d2e8-7cd8-11dd-8f94-e62b56d89593--Defs--Magic-v3.0.8.o8g" id="testimg" height="120" width="90" /></a>
 <h2>Directories:</h2>
 <div id="dirdiv"></div>
 <h2>Files:</h2>
 <div id="filediv"></div>
</div>
